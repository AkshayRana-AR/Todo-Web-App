<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Todo List Page</title>
</head>
<body>
    <table id="notestable" border="1" align="center" style="background-color:rgb(224, 248, 248); font-family: 'Comic Sans MS', cursive, sans-serif;">
        <tr><td colspan="6" align="center"><a href="AddTask.html"><img src="icons/add.png" width="35px" height="35px" alt="Add Task" style="padding: 2px;margin: 2px;"></img></a></td></tr>
            <th>Title</th>
            <th>Description</th>
            <th>End Date</th>
            <th>Status</th>
            <th colspan="2">Action</th>
        </tr>
      <!--   <tr>
           <td>Akshay Rana</td>
            <td rowspan="3">I am a Software Engineer at InnovateMR LLC </td>
            <td>2021-07-07</td>
            <td>In Progress</td>
            <td colspan="1" ><img src="icons/edit.png" width="25px" height="25px" alt="Edit" style="padding: 2px;margin: 2px;"></img></td>
            <td colspan="1"><img src="icons/delete.png"  width="30px" height="30px" alt="Edit" style="padding: 2px;margin: 2px;"></img></td>
        </tr>-->
    </table>
    
    <script>

        var table = document.getElementById('notestable');
    
        function getData()
        {
           // if(localStorage.length!=null)
            for(let i=0;i<localStorage.length;i++)
            {
               console.log(localStorage.length);
                let key=localStorage.key(i);
                //console.log(localStorage.getItem(key));
                let json_obj=localStorage.getItem(key);
                let obj=JSON.parse(json_obj);
               // console.log(obj);
                let title=obj.json_title;
                //console.log(title);
                let description=obj.json_description;
                let enddate=obj.json_enddate;
                let status=obj.json_status;
                let todo_number=obj.json_todo_number;
                addRows(title,description,enddate,status,todo_number);
            }
        }
getData();



        function addRows(title,description,enddate,status,todo_number)
         {
                row = table.insertRow(2),
                cell1 = row.insertCell(0),
                cell2 = row.insertCell(1);
                cell3=row.insertCell(2);
                cell4=row.insertCell(3);
                cell5=row.insertCell(4);
                cell6=row.insertCell(5);

                cell1.innerHTML = title;
                cell2.innerHTML = description;
                cell3.innerHTML=enddate;
                cell4.innerHTML=status;
                cell5.innerHTML='<img src="icons/edit.png"  width="25px" height="25px" alt="Edit" style="padding: 2px;margin: 2px;"'+' id='+todo_number+'" onclick="edit_task('+todo_number+')"></img>';
                cell6.innerHTML='<img src="icons/delete.png"   width="30px" height="30px" alt="Edit" style="padding: 2px;margin: 2px;"'+' id="'+todo_number+'" onclick="delete_task('+todo_number+')"></img>';
        }

        function edit_task(todo_number)
        {
            console.log(todo_number);
            sessionStorage.setItem("todo_number",todo_number);
            location.href="AddTask.html";
        }

        function delete_task(todo_number)
        {
            console.log(todo_number);
        // location.href="AddTask.html";

            localStorage.removeItem(todo_number);
        // localStorage.setItem(todo_number,null);
            location.reload();
        }

    </script>
</body>
</html>

